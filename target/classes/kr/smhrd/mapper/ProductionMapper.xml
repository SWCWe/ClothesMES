<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.smhrd.mapper.ProductionMapper">
    
    <select id="prodList" resultType="kr.smhrd.entity.ProductionVO">
        select f.m_seq, f.prod_code, f.prod_m_date, f.m_cnt, m.name
        from t_manufacture f, t_member m
        where f.emp_no = m.emp_no
    </select>
    
     <!-- 생산 정보 추가하기 -->
    <insert id="insertmanufactureList" parameterType="kr.smhrd.entity.ProductionVO">
        insert into t_manufacture(prod_code, prod_m_date, m_cnt, emp_no)
        values (#{prod_code}, ${prod_m_date}, #{m_cnt},
        		(select distinct f.emp_no
        		from t_manufacture f, t_member m
        		where f.emp_no = m.emp_no
        		and m.name = #{name}))	
	 </insert>
    
    <!-- 생산 정보 삭제하기 -->
    <delete id="deleteprod" parameterType="kr.smhrd.entity.ProductionVO">
        delete from t_manufacture
        where m_seq = #{m_seq}
    </delete>
    
    <!-- 검색 내용 가져오기(조건 부분 쿼리 통째로 삽입) -->
    <select id="searchmanufactureList" parameterType="kr.smhrd.entity.ProductionVO" resultType="kr.smhrd.entity.ProductionVO">
        select f.m_seq, f.prod_code, f.prod_m_date, f.m_cnt , m.name
        from t_manufacture f, t_member m
        where f.emp_no = m.emp_no
        ${releaseQuery}
    </select>
    
    
</mapper>